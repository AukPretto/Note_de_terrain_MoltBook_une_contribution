<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Note de terrain MoltBook - une contribution</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
            background: #0b0b0c;
            color: #eaeaea;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header-card {
            background: #141418;
            border: 1px solid #24242b;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        h1 {
            margin: 0 0 8px 0;
            font-size: 24px;
            color: #eaeaea;
        }
        
        .subtitle {
            color: #888;
            font-size: 16px;
            margin-bottom: 12px;
        }
        
        .version {
            font-size: 14px;
            color: #666;
        }
        
        .auto-trad-badge {
            display: none;
            font-size: 12px;
            color: #ffaa00;
            font-style: italic;
            margin-left: 8px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #24242b;
        }
        
        button {
            padding: 10px 16px;
            border: 1px solid #2d2d36;
            border-radius: 8px;
            background: #24242b;
            color: #eaeaea;
            cursor: pointer;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.2s;
        }
        
        button:hover {
            background: #2d2d36;
            border-color: #4a4a58;
        }
        
        button.active {
            background: #4a4a58;
            border-color: #6a6a7a;
        }
        
        .download-btn {
            background: #1a4d2e;
            border-color: #2d5f3f;
        }
        
        .download-btn:hover {
            background: #2d5f3f;
            border-color: #3a7050;
        }
        
        .pdf-viewer {
            width: 100%;
            height: 85vh;
            background: #0f0f12;
            border: 1px solid #24242b;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .pdf-viewer iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .footer-note {
            margin-top: 15px;
            padding: 12px;
            font-size: 12px;
            color: #666;
            background: rgba(136, 136, 136, 0.05);
            border-radius: 8px;
            border-left: 2px solid #333;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- En-tÃªte -->
        <div class="header-card">
            <h1 id="main-title">Note de terrain MoltBook</h1>
            <div class="subtitle" id="subtitle">une contribution</div>
            <div class="version">
                Version : v1.1
                <span class="auto-trad-badge" id="auto-trad-badge">- traduction automatique</span>
            </div>
            
            <!-- ContrÃ´les -->
            <div class="controls">
                <button id="btn-fr" class="active" onclick="switchLanguage('fr')">
                    ðŸ‡«ðŸ‡· FranÃ§ais
                </button>
                <button id="btn-en" onclick="switchLanguage('en')">
                    ðŸ‡¬ðŸ‡§ English
                </button>
                <button class="download-btn" id="btn-download" onclick="downloadPDF()">
                    ðŸ“¥ TÃ©lÃ©charger le PDF
                </button>
            </div>
        </div>
        
        <!-- Visionneuse PDF -->
        <div class="pdf-viewer">
            <iframe 
                id="pdf-iframe"
                src="./Note_de_terrain_MoltBook_une_contribution.pdf"
                title="PDF Viewer">
                <div class="loading">
                    Chargement du PDF...
                </div>
            </iframe>
        </div>
        
        <!-- Note de bas de page -->
        <div class="footer-note" id="footer-note">
            Le document s'affiche directement dans votre navigateur. 
            Si vous rencontrez des problÃ¨mes, utilisez le bouton de tÃ©lÃ©chargement.
        </div>
    </div>

    <script>
        // Configuration des fichiers
        const FILES = {
            fr: {
                filename: 'Note_de_terrain_MoltBook_une_contribution.pdf',
                title: 'Note de terrain MoltBook',
                subtitle: 'une contribution',
                downloadText: 'ðŸ“¥ TÃ©lÃ©charger le PDF',
                footerNote: 'Le document s\'affiche directement dans votre navigateur. Si vous rencontrez des problÃ¨mes, utilisez le bouton de tÃ©lÃ©chargement.',
                pageTitle: 'Note de terrain MoltBook - une contribution',
                showAutoTrad: false
            },
            en: {
                filename: 'Field_Note_Moltbook_a_contribution_auto-tard_eng.pdf',
                title: 'Field Note MoltBook',
                subtitle: 'a contribution',
                downloadText: 'ðŸ“¥ Download PDF (auto-translated)',
                footerNote: 'The document is displayed directly in your browser. If you encounter problems, use the download button.',
                pageTitle: 'Field Note MoltBook - a contribution',
                showAutoTrad: true
            }
        };
        
        // Ã‰tat actuel
        let currentLang = 'fr';
        
        // Fonction pour changer de langue
        function switchLanguage(lang) {
            currentLang = lang;
            const config = FILES[lang];
            
            // Mettre Ã  jour les boutons
            document.getElementById('btn-fr').classList.toggle('active', lang === 'fr');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            
            // Mettre Ã  jour les textes
            document.getElementById('main-title').textContent = config.title;
            document.getElementById('subtitle').textContent = config.subtitle;
            document.getElementById('btn-download').textContent = config.downloadText;
            document.getElementById('footer-note').textContent = config.footerNote;
            document.title = config.pageTitle;
            document.documentElement.lang = lang;
            
            // Afficher/masquer le badge auto-trad
            document.getElementById('auto-trad-badge').style.display = config.showAutoTrad ? 'inline' : 'none';
            
            // Charger le PDF correspondant
            const iframe = document.getElementById('pdf-iframe');
            iframe.src = './' + config.filename;
            
            // Sauvegarder la prÃ©fÃ©rence
            localStorage.setItem('preferred-language', lang);
            
            console.log('Langue changÃ©e vers:', lang, '- Fichier:', config.filename);
        }
        
        // Fonction de tÃ©lÃ©chargement
        function downloadPDF() {
            const config = FILES[currentLang];
            const link = document.createElement('a');
            link.href = './' + config.filename;
            link.download = config.filename;
            link.click();
            console.log('TÃ©lÃ©chargement demandÃ©:', config.filename);
        }
        
        // Initialisation au chargement de la page
        window.addEventListener('load', function() {
            // RÃ©cupÃ©rer la langue sauvegardÃ©e
            const savedLang = localStorage.getItem('preferred-language');
            
            // DÃ©tecter la langue du navigateur
            const browserLang = navigator.language.startsWith('en') ? 'en' : 'fr';
            
            // Utiliser: sauvegardÃ©e > navigateur > franÃ§ais par dÃ©faut
            const initialLang = savedLang || browserLang;
            
            // Appliquer la langue
            if (initialLang !== 'fr') {
                switchLanguage(initialLang);
            }
            
            console.log('Page chargÃ©e - Langue initiale:', initialLang);
        });
    </script>
</body>
</html>

